\subsection{I/O Hints}

\subsubsection{Controlling Collective I/O}

MPI provides a mechanism based on MPI \emph{hints} to allow the user to
provide information that an improve performance.  Note that all hints do
\emph{not} change the semantics of the operations but can influence the
algorithms used by the MPI implementation.  For collective I/O, MPI defines
two \code{MPI_Info} key values:
\begin{description}
\item[\texttt{cb\_buffer\_size}] specifies the size of the buffer used for
  aggregation, and might allow a user to do some tuning.
\item[\texttt{cb\_nodes}]specifies the number of processes that will actually
  do I/O, although it doesn't let you name them.
\end{description}

Note that ROMIO implements both of these.

This solves your first problem, which is to constrain the number of processes
doing I/O and to control the amount of memory dedicated to it, but doesn't
allow you to specify exactly which processes do it.

However, for some systems configurations, more control is needed to specify
which processes are prefered for collective I/O.  MPICH (will) provide the
additional \code{MPI_Info} key name
\begin{description}
\item[\texttt{io\_config\_list}]specifies a comma-separated list of strings,
  each string specifying a particular node and an optional limit on the number
  of processes to be used for collective buffering on this node.  
\end{description}
This refers to the same processes that \code{cb_nodes} refers to, but gives
specifies the available nodes more precisely.

The format of the value of \code{io_config_list} is given by the following:
\begin{verbatim}
io_config_list => hostspec [ ',' io_config_list ]
hostspec       => hostname [ ':' maxprocesses ]
hostname       => <alphanumeric string>
               |  '*'
maxprocesses   => <digits>
               |  '*'
\end{verbatim}
The value \code{hostname} identifies a processor.  This name must match the
name returned by \code{MPI_Get_processor_name} for the specified hardware.
The value \code{*} matches all processors.

The value \code{maxprocesses} specifies the maximum number of processes.
If no value is specified, the value one is assumed.  If \code{*} is specified,
then as many processes as there are processors are used.

% We propose a new hint, to be called io_config_list, which is a comma-separated
% list of strings, each string of which is a hostname:number-of-processes-to-
% perform-real-I/O-from-this-node, where "*" means all possible hosts.

Here are some examples of what this might look like:

\begin{description}
\item[\texttt{*:1}]One process per hostname, i.e., one process per node)
\item[\texttt{box12:30,*:0}] Thirty processes on one machine, namely box12,
  and none anywhere else.
\item[\texttt{n01,n11,n21,n31,n41}]Processes on these specific nodes only.
\end{description}

When the values specified by \code{io_config_list} conflict with other hints
(e.g., the number of collective buffering nodes specified by \code{cb_nodes}),
the implementation is encouraged to give priority to \code{io_config_list}.

Question: do we want to take the minimum of the two values?  E.g., if
\code{cb_nodes=3,io_config_list=*:1}, use only three nodes?
