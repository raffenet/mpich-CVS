%
% Style file for the MPI design documents
%
%
% Design document for MPICH2
%
\textheight=9in
\textwidth=6.1in
\oddsidemargin=.2in
\topmargin=-.50in
\newread\testfile

%
% Modify the way titles are handled for no breaks between pages
%\def\mantitle#1#2#3{\pagerule\nobreak
%\ifmancontents\addcontentsline{toc}{subsection}{#1}\fi}

\def\nopound{\catcode`\#=13}
{\nopound\gdef#{{\tt \char`\#}}}
\catcode`\_=13
\def_{{\tt \char`\_}}
\catcode`\_=11
\def\code#1{{\tt #1}}
\def\makeuscore{\catcode`\_=13}
\def\onespace{\hskip .5em}
{\catcode`\ =13
\gdef\makespaceactive{\catcode`\ =13\let =\onespace}}
\ifx\texofpdfstring\relax
\def\mpifunc#1{\code{#1}\index{#1}}
\else
\def\mpifunc#1{\texorpdfstring{\code{#1}}{#1}\index{#1}}
\fi
% We may want to separate the MPI and MPID index entries
\def\mpidfunc#1{\code{#1}\index{#1}}
% ditto for constants
\def\mpiconst#1{\code{#1}\index{#1}}
\def\mpidconst#1{\code{#1}\index{#1}}
% MPI data structure element.  For example, 
% \mpids{MPI_Comm}{rank}.  Prints the second argument.
\def\mpids#1#2{\code{#2}\index{#1!#2}}
% Environment variables
\def\eindex#1{\index{#1}}
% Configure option and related topics
\def\cfgindex#1{\index{#1}}
\def\cfgoption#1{\code{#1}\cfgindex{#1}}
% 
% These provide environments to describe the implementation of each routine
%
%\newenvironment{adi3}{\begin{quote}\textbf{ADI3:}\\}{\end{quote}}
%\newenvironment{mmadi}{\begin{quote}\textbf{MMADI:}\\}{\end{quote}}
%\newenvironment{core}{\begin{quote}\textbf{Core:}\\}{\end{quote}}
\newenvironment{adi3}{}{}
\newenvironment{mmadi}{}{}
\newenvironment{core}{}{}

%
% For rma, there are these three kinds:
\newcommand\tcpname{Twosided}
\newcommand\shmemname{SharedMem}
\newcommand\vianame{RemoteMem}
\newcommand\shmemallname{AllSharedMem}
% \newenvironment{tcp}{\begin{quote}\textbf{\tcpname:}\\}{\end{quote}}
% \newenvironment{shmem}{\begin{quote}\textbf{\shmemname:}\\}{\end{quote}}
% \newenvironment{via}{\begin{quote}\textbf{\vianame:}\\}{\end{quote}}
% \newenvironment{shmemall}{\begin{quote}\textbf{\shmemallname:}\\}{\end{quote}}
\newenvironment{tcp}{}{}
\newenvironment{shmem}{}{}
\newenvironment{via}{}{}
\newenvironment{shmemall}{}{}

%
% Algorithm
% It would be nice to find a version of obeylines that numbered the lines.
\newif\ifwasvmode
% The wasvmode allows us to exit and return to paragraph mode
\newenvironment{algorithm}{\ifvmode\wasvmodetrue\else\par\wasvmodefalse\fi
\begingroup\advance\leftskip2em\obeylines\obeyspaces
\makeuscore\noindent\makespaceactive\parskip 0pt}{\endgroup\ifwasvmode\else\noindent\fi}

%
% This is used to indicate a implementation of a routine.
\def\implementation#1{\ifvmode\else\par\fi\pagerule\nobreak\code{#1}:\index{#1!implementation}\par}

%
% Modify paragraph appearance
\setlength{\parskip}{1em}
\setlength{\parindent}{1em}
%
% String version of error codes
\def\emsg#1{(\texttt{**#1})}
%
% Optionally include the rationale
\newif\ifrationale
\rationaletrue
%
% Use this to indicate the status of a function.
%\newcommand\funcstatus[1]{\marginpar{#1}}
\newcommand\funcstatus[1]{\relax}
