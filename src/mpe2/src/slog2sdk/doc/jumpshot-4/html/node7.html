<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>2.2.1 Understanding the Preview State Display</TITLE>
<META NAME="description" CONTENT="2.2.1 Understanding the Preview State Display">
<META NAME="keywords" CONTENT="usersguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="usersguide.css">

<LINK REL="previous" HREF="node6.html">
<LINK REL="up" HREF="node6.html">
<LINK REL="next" HREF="node8.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html209"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html205"
  HREF="node6.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html201"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html207"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html210"
  HREF="node8.html">3. Graphical User Interface</A>
<B> Up:</B> <A NAME="tex2html206"
  HREF="node6.html">2.2 Understanding the Preview</A>
<B> Previous:</B> <A NAME="tex2html202"
  HREF="node6.html">2.2 Understanding the Preview</A>
 &nbsp; <B>  <A NAME="tex2html208"
  HREF="node2.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00321000000000000000"></A><A NAME="sub:Preview-State-Display"></A>
<BR>
2.2.1 Understanding the Preview State Display
</H2>

<P>
So far only one of the representations of preview state, <I>CumulativeInclusionRatio</I>,
is used to illustrate the concept and representation of the preview
state. Jumpshot-4 actually uses several different representations
of preview state. All these representations are based on 2 ratios
stored in SLOG-2 file. They are called <I>Inclusion Ratio</I> and
<I>Exclusion Ratio.</I> Inclusion ratio is computed without taking
into account of the nesting order of the states. States which are
either nested inside or enclose other states contribute equally to
the inclusion ratio. The end result is that the sum of all inclusion
ratios from all state categories in a preview state could easily be
larger than 1. On the other hand, exclusion ratio is specifically
computed to exclude the overlap of the nested state from the enclosing
state. Therefore the sum of exclusion ratios of all state categories
in a preview state is guaranteed to be less than or equal to 1. 

<P>
The motivation of computing these 2 ratios is to satisfy two opposite
needs of preview state. If you are a MPI application developer and
you have put a lot of user-defined states in your SLOG-2 file through
either MPE or AIX's PCT utility, you most likely would be interested
in the profiling information of the user-defined states which enclose
MPI states and other user-defined states. In this case, inclusion
ratio will be very useful. Because inclusion ratios of user-defined
states usually dominate all state inclusion ratios, including those
of MPI states. Therefore, the inclusion ratio highlights the outermost
enclosing states even at high preview level. On the other hand, if
you are a MPI implementor or are interested in the low level MPI networking
overhead, you are most likely interested in the profiling information
of MPI and its internal calls. Exclusion ratio will come in handy.
Exclusion ratios for the innermost nested states, i.e. MPI states,
tend to dominate all state exclusion ratios. So the exclusion ratio
highlights the innermost nested states at very high preview level.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_nesting_detail"></A><A NAME="654"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.6:</STRONG>
A zoomed in view of some nested
states where the duration of the orange state is 1.0 sec. The duration
of the navy blue state is 0.8 sec. The sum of durations for the 2
yellow states is 0.5 sec.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="642" HEIGHT="277" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_nesting_detail.png"
 ALT="Image timeline_nesting_detail">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Figure <A HREF="#fig:timeline_nesting_detail">2.6</A> shows a typical zoomed in
view of some nested states. In this view, the yellow states are deeply
nested in the navy blue state which is in turns nested in the orange
state. The pair of green lines mark the region where a preview state
is being created for.

<P>
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="656"></A>
<TABLE>
<CAPTION><STRONG>Table 2.2:</STRONG>
The breakdown of real states'
contribution to a preview state of duration 1.0 sec as it is marked
by a pair of green lines in Figure <A HREF="#fig:timeline_nesting_detail">2.6</A>.</CAPTION>
<TR><TD><TABLE CELLPADDING=3 BORDER="1">
<TR><TD ALIGN="CENTER">Icon</TD>
<TD ALIGN="CENTER">Description</TD>
<TD ALIGN="CENTER">Duration</TD>
<TD ALIGN="CENTER">Inclusion Ratio</TD>
<TD ALIGN="CENTER">Exclusion Ratio</TD>
</TR>
<TR><TD ALIGN="CENTER"><IMG
  WIDTH="45" HEIGHT="27" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_nesting_legend_innermost.png"
 ALT="Image timeline_nesting_legend_innermost"></TD>
<TD ALIGN="CENTER">Innermost Nested State</TD>
<TD ALIGN="CENTER">0.5 sec</TD>
<TD ALIGN="CENTER">50%</TD>
<TD ALIGN="CENTER">50%</TD>
</TR>
<TR><TD ALIGN="CENTER" COLSPAN=1><IMG
  WIDTH="45" HEIGHT="28" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_nesting_legend_middle.png"
 ALT="Image timeline_nesting_legend_middle"></TD>
<TD ALIGN="CENTER">Intermediate Nested State</TD>
<TD ALIGN="CENTER">0.8 sec</TD>
<TD ALIGN="CENTER">80%</TD>
<TD ALIGN="CENTER">30%</TD>
</TR>
<TR><TD ALIGN="CENTER"><IMG
  WIDTH="44" HEIGHT="28" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_nesting_legend_outermost.png"
 ALT="Image timeline_nesting_legend_outermost"></TD>
<TD ALIGN="CENTER">Outermost Enclosing State</TD>
<TD ALIGN="CENTER">1.0 sec</TD>
<TD ALIGN="CENTER">100%</TD>
<TD ALIGN="CENTER">20%</TD>
</TR>
</TABLE>

<P>
</TD></TR>
</TABLE>
</DIV><P></P>
<BR>

<P>
The inclusion and exclusion ratios are computed for the region marked
by the pair of green lines and are shown in Table <A HREF="#table:legend_nesting_detail">2.2</A>.
The table shows that the most dominant state among all inclusion ratios
is the orange outermost state, but the most dominate state among all
exclusion ratios is the yellow innermost state which is the least
dominant state in inclusion ratios. One obvious observation is that
the inclusion and exclusion ratios of the innermost state category
are the same.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_nesting_preview_all"></A><A NAME="657"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.7:</STRONG>
Different preview state
displays of the zoomed in view of the Figure <A HREF="#fig:timeline_nesting_detail">2.6</A>.
Starting from the top, the first one is <I>CumulativeInclusionRatio</I>
view, the second one is <I>OverlapInclusionRatio</I> view, the third
one is <I>CumulativeExclusionRatio</I> view, and the last one is <I>OverlapExclusionRatio</I>
view.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="640" HEIGHT="653" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_nesting_preview_all.png"
 ALT="Image timeline_nesting_preview_all">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
With data computed in Table <A HREF="#table:legend_nesting_detail">2.2</A>, various
different preview displays can be drawn and are shown in Figure <A HREF="#fig:timeline_nesting_preview_all">2.7</A>.
All colored strips inside the preview state will be drawn proportional
to the height of the preview state. For instance, if the ratio of
the category for the strip is 0.9, the corresponding colored strip
will occupy 90% of the preview state's height. The statement is true
for all preview state display except <I>CumulativeInclusionRatio</I>
which could have its total sum of ratios in exceed of 1.0 especially
when the slog2 file is highly nested. First consider the <I>CumulativeInclusionRatio</I>
and <I>CumulativeExclusionRatio</I> views, i.e the first and the third
ones from the top in the figure. Notice that yellow state is least
important in the top <I>CumulativeInclusionRatio</I> view, but becomes
most significant in the third <I>CumulativeExclusionRatio</I> view.
Since the sum of all inclusion ratios is larger than 1, in this case,
the sum is 2.3, the <I>CumulativeInclusionRatio</I> view reweights
all ratios to fill up the preview box. Strictly speaking <I>CumulativeInclusionRatio</I>
view cannot be used to compare different preview states because of
the arbitrary rescaling<A NAME="tex2html18"
  HREF="#foot658"><SUP>2.6</SUP></A>. If one is interested in the comparison of inclusion ratios across
different preview states, <I>OverlapInclusionRatio</I> view can be
used instead. <I>OverlapInclusionRatio</I> view draws all inclusion
ratios proportional to the height of the preview state but in an overlapping
way, i.e. draw them in decreasing inclusion ratios order and stack
one on top of the other, sort of like nested state. The overlap view
of exclusion ratios is <I>OverlapExclusionRatio</I> view which is
shown at the bottom of Figure <A HREF="#fig:timeline_nesting_preview_all">2.7</A>.
<I>OverlapExclusionRatio</I> view draws exclusion ratios exactly the
same way as <I>OverlapInclusionRatio</I>. In general, overlap view
cannot fill up the full height of the preview state. This is apparent
in <I>OverlapExclusionRatio</I> view in <A HREF="#fig:timeline_nesting_preview_all">2.7</A>
where the white bordered box indicates the full height of the preview
state. The white bordered box is necessary in comparing the ratios
across different preview states with respect to the preview states'
duration. However, the white bordered box can sometimes be confusing,
because whatever in the back of the preview state can show through
the empty space within the white bordered box. In that case, the bordered
box can be turned off by selecting <I>Empty</I> in PREVIEW_STATE_BORDER
in Preference window. 

<P>
For the sake of comparison and continuity with our preview discussion,
the <I>CumulativeExclusionRatio</I> view of Figures <A HREF="node6.html#fig:timeline_preview_detail_0">2.1</A>
and <A HREF="node6.html#fig:timeline_preview_detail_1">2.2</A> are shown in Figures <A HREF="#fig:timeline_preview_detail_0_excl">2.8</A>
and <A HREF="#fig:timeline_preview_detail_1_excl">2.9</A> respectively. The <I>CumulativeExclusionRatio</I>
view does provide an extra dimension of information when compared
to its inclusion ratio counterpart at the expense of being a bit more
complicated to digest visually.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_0_excl"></A><A NAME="659"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.8:</STRONG>
The <I>CumulativeExclusionRatio</I>
view of Figure <A HREF="node6.html#fig:timeline_preview_detail_0">2.1</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_0_excl.png"
 ALT="Image timeline_preview_detail_0_excl">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_1_excl"></A><A NAME="660"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.9:</STRONG>
The <I>CumulativeExclusionRatio</I>
view of Figure <A HREF="node6.html#fig:timeline_preview_detail_1">2.2</A>. Also, a zoom-in
shot of Figure <A HREF="#fig:timeline_preview_detail_0_excl">2.8</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_1_excl.png"
 ALT="Image timeline_preview_detail_1_excl">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>

<P>
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot658">... rescaling</A><A
 HREF="node7.html#tex2html18"><SUP>2.6</SUP></A></DT>
<DD>Most of times, neighoring preview states in <I>CumulativeInclusionRatio</I>
view has similar total sum of inclusion ratios. Because of this fact,
one can compare adjacent preview states. But bear in mind that the
total sum of inclusion ratios between nearby preview states can change
drastically without any visual indication. When in doubt, right click
on the preview state to get Drawable Info Box to confirm the ratios.

</DD>
</DL><HR>
<!--Navigation Panel-->
<A NAME="tex2html209"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html205"
  HREF="node6.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html201"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html207"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html210"
  HREF="node8.html">3. Graphical User Interface</A>
<B> Up:</B> <A NAME="tex2html206"
  HREF="node6.html">2.2 Understanding the Preview</A>
<B> Previous:</B> <A NAME="tex2html202"
  HREF="node6.html">2.2 Understanding the Preview</A>
 &nbsp; <B>  <A NAME="tex2html208"
  HREF="node2.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
