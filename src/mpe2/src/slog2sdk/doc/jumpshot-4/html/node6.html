<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>2.2 Understanding the Preview Drawable</TITLE>
<META NAME="description" CONTENT="2.2 Understanding the Preview Drawable">
<META NAME="keywords" CONTENT="usersguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="usersguide.css">

<LINK REL="previous" HREF="node5.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node7.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html198"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html194"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html190"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html196"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html199"
  HREF="node7.html">2.2.1 Understanding the Preview</A>
<B> Up:</B> <A NAME="tex2html195"
  HREF="node4.html">2. Data Model</A>
<B> Previous:</B> <A NAME="tex2html191"
  HREF="node5.html">2.1 Understanding the Drawable</A>
 &nbsp; <B>  <A NAME="tex2html197"
  HREF="node2.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00320000000000000000">
2.2 Understanding the Preview Drawable</A>
</H1>

<P>
A preview drawable is created as a result of the renormalization process
of the SLOG-2 format. The renormalized object provides a high-level
description of what is going on within the (timeline vs time) region
where the preview object spans. Preview drawable is designed to amalgamate
real drawables of same topological type, e.g. preview state amalgamates
only states. So preview drawable is always a primitive drawable in
the renormalization scheme. There are currently 3 different types
of preview drawables: <I>Preview_State, Preview_Arrow, and Preview_Event.</I>
Therefore one preview drawable is for each supported topology of primitive
drawable. Up to three preview categories could show up in the Legend
window of the display program as shown in Figure <A HREF="node11.html#fig:legend_popup">3.5</A>.
The Legend window contains a table of legends which are basically
visual representation of category objects mentioned earlier. Each
legend provides an interface to the user modifiable part of the corresponding
category that is relevant to the display program. 

<P>
Figures <A HREF="#fig:timeline_preview_detail_0">2.1</A> to <A HREF="#fig:timeline_preview_detail_4">2.5</A>
illustrate the visual transition from preview drawable to its detailed
content of the first 5 processes of a 16 processes MPI slog2 file
when the timeline canvas is being zoomed-in. The sequence of figures
is generated by zooming in a marked region in each successive figure
in the sequence. The marked region is shaded and is bounded by a pair
of white lines. A magnifying glass with plus sign in the center is
the cursor that marks the end of the zoom region. Figure <A HREF="#fig:timeline_preview_detail_0">2.1</A>
is a typical timeline canvas where most of real drawables are still
buried inside their preview drawables. In the figure, there are preview
arrows, preview states in the front and some long running real states
in the back.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_0"></A><A NAME="646"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.1:</STRONG>
A typical zoom-out view of
preview states and arrows. The region that is marked by a pair of
white lines and the zoom-plus cursor is being zoomed in, i.e. enlarged,
in the next figure.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_0.png"
 ALT="Image timeline_preview_detail_0">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Each thick yellow line is a <I>preview arrow</I> which represents
a collection of arrows between its 2 ending timelines. The start and
final timestamps of preview arrow are the extremes of all real arrows
amalgamated inside the preview object. Notice that the beginning or
ending timestamp of a preview arrow does not necessarily mean that
there is any arrow starting and ending at that times, it just indicates
that there are arrows starting or ending within these 2 times and
between the 2 marked timelines. The thickness of the preview arrow
denotes the number of real arrows represented by the preview object.
Because of the limitation on the available thickness that preview
arrow can have, the thickness of the preview object is set to equal
to the order of magnitude of the number of real objects amalgamated.
So same thickness in two different preview arrows does not mean that
they contain exactly the same number of real arrows, but does mean
that the numbers of real arrows contained in the preview objects are
within the same order of magnitude, i.e. within a constant multiplicative
factor as defined by PREVIEW_ARROW_LOG_BASE in Preference window
shown in Figure <A HREF="node29.html#fig:preference_pview_state">3.27</A> and in Table <A HREF="#table:preference_zoomable_timeline">3.18</A>.
Different thickness in preview arrows indicates more than one multiple
of the constant factor difference in the number of real arrows between
the preview objects.

<P>
The rectangle that has horizontal strips of colors is <I>preview
state</I>. The different colors inside a preview state represent the
various categories of real states that are amalgamated within the
time range of the preview state. Depending on the PREVIEW_STATE_DISPLAY
value selected in the pulldown menu at the top of left side Y-axis
label <A NAME="tex2html7"
  HREF="#foot647"><SUP>2.2</SUP></A>, the distribution and the heights of the strips can be changed drastically.
One of the display options for preview state is <I>CumulativeInclusionRatio</I>.
With this option, the strips are arranged in decreasing height order,
sort of like a small cumulative histogram. The tallest strip at the
bottom of the preview state corresponds to the category of states
that contribute the longest total duration in the specified time range
<I>inclusively</I>, i.e. disregarding the nesting state order. This
visual representation aims to tell what state categories could be
within the span of the preview state and which state category contributes
the most statistically to the specified time range, so user can decide
where to zoom in to find out more details. In a sense, the preview
states provide a global coarse-grain summary of what is going on without
losing as much details as the preview found in older Jumpshot, i.e.
Jumpshot-3. Compared with Jumpshot-3's preview which has averaged
out the information about timeline IDs, the new preview states retain
the timeline ID information and that may lead to early detection of
load balancing problem before zooming in to see all the real states. 

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_1"></A><A NAME="648"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.2:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_0">2.1</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_1.png"
 ALT="Image timeline_preview_detail_1">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A> shows a more zoom-in view
of the region marked by the pair of white lines in Figure <A HREF="#fig:timeline_preview_detail_0">2.1</A>.
In Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>, some of the preview
arrows have disappeared and are replaced by real arrows, i.e. the
white arrows. Also, some of the stripped preview states have split
into several small preview states of identical color, i.e. the white
and gray states, to show more detailed distribution. Another important
feature of preview state becomes apparent in the figures: Preview
states are properly nested within real states. In the most expanded
Y-axis label view, preview state is always on top of other nested
states<A NAME="tex2html9"
  HREF="#foot72"><SUP>2.3</SUP></A>, i.e. states that enclose the preview state are alway real states.
A good visual example is shown in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>
where all the white, turquoise and gray preview states<A NAME="tex2html10"
  HREF="#foot74"><SUP>2.4</SUP></A> are sitting on top of the long orange and dark royal blue states.
This indicates that the white, turquoise and gray real states are
all nested inside the long running orange and dark royal blue states.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_2"></A><A NAME="649"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.3:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_1">2.2</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_2.png"
 ALT="Image timeline_preview_detail_2">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A> is the zoom-in view of
the region marked by the pair of white lines in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>.
Comparing these 2 figures, all the preview drawables have disappeared
and are replaced by real drawables. Each white preview state are replaced
by hundreds of white real states, the same is also true for the gray
preview states that sit to the right of the turquoise states<A NAME="tex2html12"
  HREF="#foot650"><SUP>2.5</SUP></A>. The preview arrows are all replaced by the real arrows. It becomes
apparent that the white lines marked region in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>
provides a good description of what is going on in Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A>
but at the same time it reduces the number of drawables drawn on the
canvas by a factor of 100. Another way of seeing this benefit is to
find out the exact number of real drawables amalgamated by the preview
objects within the zoomed region. This can be achieved by right clicking
on the preview drawable and the result is shown in Figure <A HREF="node19.html#fig:timeline_infobox_preview_state">3.16</A>.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_3"></A><A NAME="651"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.4:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_2">2.3</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_3.png"
 ALT="Image timeline_preview_detail_3">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Further zooming into the white lines marked region in Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A>
enlarges the real drawables that are displayed in the figure. The
enlarged view is shown in Figure <A HREF="#fig:timeline_preview_detail_3">2.4</A>.
The densely packed states and arrows become more distinguishable.
Another zooming in around the white lines marked region in Figure
<A HREF="#fig:timeline_preview_detail_3">2.4</A> enlarges the real drawables into
easily separable objects as shown in Figure <A HREF="#fig:timeline_preview_detail_4">2.5</A>.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_4"></A><A NAME="652"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.5:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_3">2.4</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="679" HEIGHT="465" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_4.png"
 ALT="Image timeline_preview_detail_4">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>

<P>
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot647">...</A><A
 HREF="node6.html#tex2html7"><SUP>2.2</SUP></A></DT>
<DD>In Preference window as shown in Figure <A HREF="node29.html#fig:preference_pview_state">3.27</A>
and in Table <A HREF="#table:preference_zoomable_timeline">3.18</A>, there is also
a PREVIEW_STATE_DISPLAY variable. The variable determines the initial
PREVIEW_STATE_DISPLAY used when Timeline window is first made visible.

</DD>
<DT><A NAME="foot72">...
states</A><A
 HREF="node6.html#tex2html9"><SUP>2.3</SUP></A></DT>
<DD>Only in slog2 file that has multiple ViewMaps and where timelines
can be collapsed, i.e. AIX's UTE generated slog2 file, preview state
can be nested with other preview state in collapsed Y-axis label view.

</DD>
<DT><A NAME="foot74">... states</A><A
 HREF="node6.html#tex2html10"><SUP>2.4</SUP></A></DT>
<DD>when a preview state contains only real states of one single category,
it may appear like a real state in the timeline canvas. The only sure
way to tell the difference is to bring up the Drawable Info Box by
right clicking on the state.

</DD>
<DT><A NAME="foot650">... states</A><A
 HREF="node6.html#tex2html12"><SUP>2.5</SUP></A></DT>
<DD>In order to speed up graphics performance of the display program,
an aggressive algorithm has been employed to eliminate drawing states
that are closely packed together within the nearest neighboring pixels.
Together with the fact that the number of pixels available is less
than the number of non-overlap states in the region, the number of
the real states may sometimes not appear as numerous as the Drawable
Info Box of preview state indicates. In that case, a further zoom
in will be needed to confirm the case as shown in Fig. <A HREF="#fig:timeline_preview_detail_3">2.4</A>.

</DD>
</DL>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html200"
  HREF="node7.html">2.2.1 Understanding the Preview State Display</A>
</UL>
<!--End of Table of Child-Links-->
<HR>
<!--Navigation Panel-->
<A NAME="tex2html198"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html194"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html190"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html196"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html199"
  HREF="node7.html">2.2.1 Understanding the Preview</A>
<B> Up:</B> <A NAME="tex2html195"
  HREF="node4.html">2. Data Model</A>
<B> Previous:</B> <A NAME="tex2html191"
  HREF="node5.html">2.1 Understanding the Drawable</A>
 &nbsp; <B>  <A NAME="tex2html197"
  HREF="node2.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
