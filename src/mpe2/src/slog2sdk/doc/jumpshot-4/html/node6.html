<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>2.2 Understanding the Preview Drawable</TITLE>
<META NAME="description" CONTENT="2.2 Understanding the Preview Drawable">
<META NAME="keywords" CONTENT="usersguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="usersguide.css">

<LINK REL="previous" HREF="node5.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node7.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html160"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html156"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html152"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html158"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html161"
  HREF="node7.html">3. Graphical User Interface</A>
<B> Up:</B> <A NAME="tex2html157"
  HREF="node4.html">2. Data Model</A>
<B> Previous:</B> <A NAME="tex2html153"
  HREF="node5.html">2.1 Understanding the Drawable</A>
 &nbsp; <B>  <A NAME="tex2html159"
  HREF="node2.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00320000000000000000">
2.2 Understanding the Preview Drawable</A>
</H1>

<P>
A preview drawable is created as a result of the renormalization process
of the SLOG-2 format. The renormalized object provides a high-level
description of what is going on within the (timeline vs time) region
where the prevew object spans. Preview drawable is designed to amalgamate
real drawables of same topological type, e.g. preview state amalgamates
only states. So preview drawable is always a primitive drawable in
the renormalization scheme. There are currently 3 different types
of preview drawables: <I>Preview_State, Preview_Arrow, and Preview_Event.</I>
Therefore one preview drawable is for each supported topology of primitive
drawable. The three preview categories will always show up in the
Legend window of the display program as shown in Figure <A HREF="node9.html#fig:legend_popup">3.2</A>
disregarding of the presence of preview drawables in the slog2 file.
The Legend window contains a table of legends. Each legend provides
an interface to the user modifiable part of the corresponding category
that is relevant to the display program. 

<P>
Figures <A HREF="#fig:timeline_preview_detail_0">2.1</A> to <A HREF="#fig:timeline_preview_detail_4">2.5</A>
illustrate the visual transition from preview drawable to its detailed
content of the first 5 processes of a 16 processes MPI slog2 file
when the timeline canvas is being zooming-in. The sequence of figures
is generated by zooming in a marked region in each figure in the sequence.
The marked region is shaded and is bounded by a pair of white lines.
A magnifying glass with plus sign in the center is the cursor that
marks the end of the zoom region. Figure <A HREF="#fig:timeline_preview_detail_0">2.1</A>
is a typical timeline canvas where most of real drawables are still
buried by their preview drawables. In the figure, there are preview
arrows, preview states and some long running real states.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_0"></A><A NAME="406"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.1:</STRONG>
A typical zoom-out view of
preview states and arrows.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"><IMG
  WIDTH="543" HEIGHT="457" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_0.png"
 ALT="Image timeline_preview_detail_0">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Each thick yellow line is a <I>preview arrow</I> which represents
a collection of arrows between its 2 ending timelines. The start and
final timestamps of preview arrow are the extremes of all real arrows
amalgamated inside the preview object. Notice that the beginning or
ending timestamp of a preview arrow does not necessarily mean that
there is an arrow starting or ending at that time, it just indicates
that there are arrows starting and ending within these 2 times and
between the 2 marked timelines.

<P>
The rectangle that has horizontal strips of colors is <I>preview
state</I>. The different colors inside a preview state represent the
various categories of real states that are amalgamated within the
time range of the preview state. Depending on the PREVIEW_STATE_DISPLAY
option selected in Preference window as shown in Figure <A HREF="node24.html#fig:preference_pview_state">3.19</A>
and in Table <A HREF="#table:preference_data2">3.12</A>, the distribution and the
heights of the strips can be changed as well. The default display
option for preview state is DECRE_WEIGHT_ORDER. In this option,
the strips are arranged in decreasing height order. The tallest strip
at the bottom of the preview state corresponds to the category of
states that contribute cumulatively the longest duration in specified
time range. This visual representation aims to tell what state categories
could be within the span of the preview state and which state category
contributes the most statistically to the specified time range, so
user can decide where to zoom in to find out more details. In a sense,
the preview states provide a global coarse-grain summary of what is
going on without losing as much details as the preview found in older
Jumpshot, i.e. Jumpshot-3. Compared with Jumpshot-3's preview which
has averaged out the timeline ID information, the new preview states
retain the timeline ID information and that may lead to early detection
of load balancing problem before zooming into seeing all the real
states. 

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_1"></A><A NAME="407"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.2:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_0">2.1</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="542" HEIGHT="457" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_1.png"
 ALT="Image timeline_preview_detail_1">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A> shows a more zoom-in view
of the region marked by the pair of white lines in Figure <A HREF="#fig:timeline_preview_detail_0">2.1</A>.
As shown in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>, some of the
preview arrows have disappeared and are replaced by real arrows, the
white arrow. Also, some of the stripped preview states have split
into several preview states of one single color, i.e. the white and
grey states, to show more detailed distribution. Another important
feature of preview state becomes apparent in the figures: Preview
states are properly nested within real states. In the most expanded
Y-axis label view, preview state is always on top of other nested
states<A NAME="tex2html8"
  HREF="#foot68"><SUP>2.2</SUP></A>, i.e. states that enclose the preview state are alway real states.
A good visual example is shown in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>
where all the white, turquoise and grey preview states<A NAME="tex2html9"
  HREF="#foot70"><SUP>2.3</SUP></A> are sitting on top of the long orange and dark royal blue states.
This indicates that the white, turquoise and grey real states will
be all nested inside the long running orange and dark royal blue states.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_2"></A><A NAME="408"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.3:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_1">2.2</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="542" HEIGHT="457" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_2.png"
 ALT="Image timeline_preview_detail_2">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A> is the zoom-in view of
the region marked by the pair of white lines in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>.
Comparing these 2 figures, all the preview drawables have disappeared
and are replaced by real drawables. Each white preview state are repleaced
by hundreds of white real states, the same is also true for the grey
preview states that sit to the right of the turquoise states<A NAME="tex2html11"
  HREF="#foot409"><SUP>2.4</SUP></A>. The preview arrows are all replaced by the real arrows. It becomes
apparent that the white lines marked region in Figure <A HREF="#fig:timeline_preview_detail_1">2.2</A>
provides a good description of what is going on in Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A>
but at the same time it reduces the number of drawables drawn on the
canvas by a factor of 100. Another way of seeing this benefit is to
find out the exact number of real drawables amalgamated by the preview
objects within the zoomed region. This can be achieved by right clicking
on the preview drawable and the result is shown in Figure <A HREF="node17.html#fig:timeline_infobox_preview_state">3.13</A>.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_3"></A><A NAME="410"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.4:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_2">2.3</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="542" HEIGHT="457" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_3.png"
 ALT="Image timeline_preview_detail_3">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
Further zooming into the white lines marked region in Figure <A HREF="#fig:timeline_preview_detail_2">2.3</A>
enlarges the real drawables that are displayed in the figure. The
enlarged view is shown in Figure <A HREF="#fig:timeline_preview_detail_3">2.4</A>.
The densely packed states and arrows become more distinguishable.
Another zooming in the whit lines marked region in Figure <A HREF="#fig:timeline_preview_detail_3">2.4</A>
enlarges the real drawables into easily separable objects as shown
in Figure <A HREF="#fig:timeline_preview_detail_4">2.5</A>.

<P>

<DIV ALIGN="CENTER"><A NAME="fig:timeline_preview_detail_4"></A><A NAME="411"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 2.5:</STRONG>
The next zoom-in view of Figure
<A HREF="#fig:timeline_preview_detail_3">2.4</A>.</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER"></DIV>
<P>
<DIV ALIGN="CENTER"><IMG
  WIDTH="545" HEIGHT="459" ALIGN="BOTTOM" BORDER="0"
 SRC="./timeline_preview_detail_4.png"
 ALT="Image timeline_preview_detail_4">
</DIV>
<P>
<DIV ALIGN="CENTER"></DIV></TD></TR>
</TABLE>
</DIV>

<P>
<BR><HR><H4>Footnotes</H4>
<DL>
<DT><A NAME="foot68">...
states</A><A
 HREF="node6.html#tex2html8"><SUP>2.2</SUP></A></DT>
<DD>Only in slog2 file that has multiple ViewMaps and where timelines
can be collapsed, i.e. AIX's UTE generated slog2 file, preview state
can be nested with other preview state in collapsed Y-axis label view.

</DD>
<DT><A NAME="foot70">... states</A><A
 HREF="node6.html#tex2html9"><SUP>2.3</SUP></A></DT>
<DD>when a preview state contains only real states of one single category,
it will appear like a real state in the timeline canvas. The only
way to tell the difference is to bring up the Drawable Info Box by
right clicking on the state.

</DD>
<DT><A NAME="foot409">... states</A><A
 HREF="node6.html#tex2html11"><SUP>2.4</SUP></A></DT>
<DD>In order to speed up grahics performance of the display program, an
aggressive algorithm has been employed to eliminate drawing states
that are closely packed together within the nearest neighboring pixels.
Together with the fact that the number of pixels available is less
than the number of non-overlap states in the region, the number of
the real states may sometimes not appear as numerous as the Drawable
Info Box of preview state indicates. In that case, a further zoom
in will be needed to confirm the case as shown in Fig. <A HREF="#fig:timeline_preview_detail_3">2.4</A>.

</DD>
</DL><HR>
<!--Navigation Panel-->
<A NAME="tex2html160"
  HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html156"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html152"
  HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html158"
  HREF="node2.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html161"
  HREF="node7.html">3. Graphical User Interface</A>
<B> Up:</B> <A NAME="tex2html157"
  HREF="node4.html">2. Data Model</A>
<B> Previous:</B> <A NAME="tex2html153"
  HREF="node5.html">2.1 Understanding the Drawable</A>
 &nbsp; <B>  <A NAME="tex2html159"
  HREF="node2.html">Contents</A></B> 
<!--End of Navigation Panel-->

</BODY>
</HTML>
